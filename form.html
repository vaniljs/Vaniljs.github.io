<!doctype html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<div class="container">
<div class="row">
    <div class="left-menu col-3">
        <a href="index.html"><h1>Vaniljs</h1></a>
        <ul>
            <li><a href="slider.html">slider</a></li>
            <li class="active"><a href="form.html">form</a></li>
            <li><a href="animate.html">animate</a></li>
        </ul>
    </div>
    <div class="content col-9">
        <div class="form-multipage">
            <div class="slide">
                <p class="title">Страница 1</p>
                <p>Выберите CMS систему:</p>
                <div class="cms">
                    <div data-name="1c-Битрикс">
                        <img src="media/bitrix.png">
                    </div>
                    <div  data-name="Magento">
                        <img src="media/magento.png">
                    </div>
                    <div data-name="OpenCart">
                        <img src="media/oc.png">
                    </div>
                    <div data-name="WordPress">
                        <img src="media/wp.png">
                    </div>
                    <input type="hidden" name="cms">
                </div>

                <select class="custom-select">
                    <option selected>Выберите тип</option>
                    <option value="100">Landing Page</option>
                    <option value="200">Корпоративный сайт</option>
                    <option value="300">Онлайн магазин</option>
                </select>

                <div class="select-result"></div>

                <script>



                    function q(selector) {
                        return document.querySelector(selector)
                    }

                    function qq(selectors) {
                        return document.querySelectorAll(selectors)
                    }
                </script>

                <a href="#">Далее</a>
            </div>
        
           <!-- <div class="slide">
                <p class="title">Страница 2</p>
                <a href="#">Далее</a>
            </div>
            <div class="slide">
                <p class="title">Страница 3</p>
                <a href="#">Далее</a>
            </div>
            <div class="slide">
                <p class="title">Страница 4</p>
                <a href="#">Конец</a>
            </div>-->
        </div>
        
        <script>
            var checkImage = qq('.cms div'),
                    cmsInput = q('input[name="cms"]');

            checkImage.forEach( (item) => {
                item.addEventListener('click', () => {
                    checkImage.forEach((item) => {
                        item.classList.remove('checked');
                    });
                    item.classList.add('checked');
                    cmsInput.value = item.getAttribute('data-name');
                });
            });

            /* Select */

            var option = qq('.custom-select option'),
                selectResult = q('.select-result');

            option.forEach((item) => {
                let div = document.createElement('div');
                div.innerHTML = item.innerHTML;
                selectResult.appendChild(div);
            });
            qq('.select-result div').forEach((item) => {
                item.addEventListener('click', (e) => {
                    if (selectResult.classList.contains('select-active')) {
                        q('.select-result div').innerHTML = e.target.innerHTML;
                        selectResult.classList.remove('select-active');
                        option.forEach((item) => {
                            item.innerHTML === e.target.innerHTML ? item.selected = true : false;
                        });
                    } else {
                        selectResult.classList.add('select-active');
                    }
                });
            });

            /*todo Не работает при клике на кроме body*/
            document.body.addEventListener('click', (e) => {
                if ( !e.target.parentNode.classList.contains('select-result') && q('.select-active')) {
                    selectResult.classList.remove('select-active');
                }
            });

            /* select */

            function q(selector) {
                return document.querySelector(selector);
            }
            function qq(selectors) {
                return document.querySelectorAll(selectors);
            }


        </script>
    </div>
</div>
</div>

<script src="script.js"></script>
</body>
</html>